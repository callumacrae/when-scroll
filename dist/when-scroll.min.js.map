{"version":3,"sources":["node_modules/lmn-gulp-tasks/node_modules/browserify/node_modules/browser-pack/_prelude.js","node_modules/fix-ev/index.js","when-scroll.min.js","src/parser.js","src/truth.js","src/util.js","src/when-scroll.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","curry","fn","ev","this","fix","window","event","target","srcElement","preventDefault","set","stopPropagation","key","val",2,"Parser","scrollPattern","pattern","util","reduce","split","acc","word","push","_truths","Truth","multiple","truth","fired","prototype","isTrue","scrollTop","./truth","./util",3,"type","distance","parseScrollDistance","_check","checks","parseInt","below","above","every","_lastFiredAt","Math","abs",4,"on","element","cb","addEventListener","attachEvent","each","arr","scope","initial","splice","curr","fix-ev",5,"whenScroll","handler","document","documentElement","./parser"],"mappings":"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","file":"when-scroll.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\n/**\n * Expose `curry` and `fix`.\n */\n\nmodule.exports = curry;\ncurry.fix = fix;\n\n/**\n * Fix event helper.\n *\n * Usage:\n *\n *   el.on('click', fix(function (ev) {\n *     // ...\n *   }));\n *\n * @param {Function} fn\n * @return {Function}\n * @api public\n */\n\nfunction curry (fn) {\n  return function (ev) {\n    fn.call(this, fix(ev));\n  }\n}\n\n/**\n * Fix event.\n *\n * @param {Event|Undefined} ev\n * @return {Event}\n * @api public\n */\n\nfunction fix (ev) {\n  if (!ev) ev = window.event;\n  if (!ev.target) ev.target = event.srcElement;\n  if (!ev.preventDefault) ev.preventDefault = set('returnValue', false);\n  if (!ev.stopPropagation) ev.stopPropagation = set('cancelBubble', false);\n  return ev;\n}\n\n/**\n * What is `set`? Not a continuable, not a future, how do you call that?\n *\n * @param {String} key\n * @param {Object} value\n * @return {Function}\n * @api private\n */\n\nfunction set (key, val) {\n  return function () {\n    this[key] = val;\n  }\n}\n",null,"'use strict';\n\nvar util = require('./util');\nvar Truth = require('./truth');\n\nfunction Parser(scrollPattern) {\n\tthis.pattern = scrollPattern;\n\n\t// Assume a string for now\n\tscrollPattern = util.reduce(scrollPattern.split(' '), function (acc, word) {\n\t\tif (word !== 'and') {\n\t\t\tacc.push(word);\n\t\t}\n\n\t\treturn acc;\n\t}, []);\n\n\tif (scrollPattern.length % 2 === 1) {\n\t\tthrow new Error('when-scroll error: invalid pattern');\n\t}\n\n\tthis._truths = [];\n\n\tfor (var i = 0; i < scrollPattern.length; i += 2) {\n\t\tthis._truths.push(new Truth(scrollPattern[i], scrollPattern[i + 1]));\n\t}\n\n\t// If any of the Truths are multiple, the entire thing should be\n\tthis.multiple = util.reduce(this._truths, function (acc, truth) {\n\t\treturn acc || truth.multiple;\n\t}, false);\n\n\tthis.fired = false;\n}\n\nParser.prototype.isTrue = function parserIsTrue(scrollTop) {\n\tif (this.fired && !this.multiple) {\n\t\treturn false;\n\t}\n\n\tvar isTrue = util.reduce(this._truths, function (acc, truth) {\n\t\treturn acc && truth.isTrue(scrollTop);\n\t}, true);\n\n\tif (isTrue) {\n\t\t// YOU'RE FIRED\n\t\tthis.fired = true;\n\t}\n\n\treturn isTrue;\n};\n\nmodule.exports = Parser;\n","'use strict';\n\nfunction Truth(type, distance) {\n\tthis.type = type;\n\tthis.distance = parseScrollDistance(distance);\n\n\tthis._check = checks[this.type];\n\n\tif (typeof this._check !== 'function') {\n\t\tthrow new Error(this.type + ' check not found');\n\t}\n\n\tthis.multiple = this._check.multiple || false;\n}\n\nTruth.prototype.isTrue = function truthIsTrue(scrollTop) {\n\treturn this._check(this.distance, scrollTop);\n};\n\nmodule.exports = Truth;\n\nvar checks = {};\n\nchecks.below = function belowCheck(distance, scrollTop) {\n\treturn distance <= scrollTop;\n};\n\nchecks.above = function aboveCheck(distance, scrollTop) {\n\treturn distance >= scrollTop;\n};\n\nchecks.every = function everyCheck(distance, scrollTop) {\n\tif (!this._lastFiredAt) {\n\t\tthis._lastFiredAt = 0;\n\t}\n\n\tif (Math.abs(this._lastFiredAt - scrollTop) >= distance) {\n\t\tthis._lastFiredAt = scrollTop;\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n};\nchecks.every.multiple = true;\n\n/**\n * Converts a string into a number of pixels. Currently only supports pixels.\n *\n * @todo: Support more than pixels!\n *\n * @param {string} distance The distance down the page in pixels.\n * @returns {Number} The distance down the page in pixels.\n */\nfunction parseScrollDistance(distance) {\n\treturn parseInt(distance);\n}\n","'use strict';\n\nvar util = module.exports = {};\nvar fix = require('fix-ev');\n\nutil.on = function onEvent(event, element, cb) {\n\tif (element.addEventListener) {\n\t\telement.addEventListener(event, cb);\n\t} else if (element.attachEvent) {\n\t\telement.attachEvent('on' + event, fix(cb));\n\t}\n};\n\nutil.each = function (arr, cb, scope) {\n\tfor (var i = 0; i < arr.length; i++) {\n\t\tcb.call(scope, arr[i], i, arr);\n\t}\n};\n\nutil.reduce = function (arr, cb, initial) {\n\tif (typeof initial === 'undefined') {\n\t\tinitial = arr.splice(0, 1)[0];\n\t}\n\n\t// It would be silly to carry on calling it initial\n\tvar acc = initial;\n\n\tutil.each(arr, function (curr) {\n\t\tacc = cb(acc, curr);\n\t});\n\n\treturn acc;\n};\n","'use strict';\n\nvar util = require('./util');\nvar Parser = require('./parser');\n\nfunction whenScroll(scrollPattern, cb) {\n\tvar handler = new Parser(scrollPattern);\n\n\tutil.on('scroll', window, function scrollHandler() {\n\t\tvar scrollTop = document.documentElement.scrollTop;\n\t\tif (handler.isTrue(scrollTop)) {\n\t\t\tcb(scrollTop);\n\t\t}\n\t});\n}\n\nwindow.whenScroll = module.exports = whenScroll;\n"],"sourceRoot":"/source/"}