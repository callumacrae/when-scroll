{"version":3,"sources":["node_modules/lmn-gulp-tasks/node_modules/browserify/node_modules/browser-pack/_prelude.js","node_modules/fix-ev/index.js","when-scroll.min.js","src/parser.js","src/truth.js","src/util.js","src/when-scroll.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","curry","fn","ev","this","fix","window","event","target","srcElement","preventDefault","set","stopPropagation","key","val",2,"Parser","scrollPattern","pattern","patternToArray","patternOkay","_truths","el","nodeType","Node","ELEMENT_NODE","undefined","push","Truth","multiple","util","reduce","acc","truth","fired","isArray","item","concat","split","word","prototype","isTrue","scrollTop","./truth","./util",3,"type","distance","parseScrollDistance","_check","checks","parseInt","below","above","within","viewportOffset","getBoundingClientRect","top","innerHeight","every","_lastFiredAt","Math","abs",4,"on","element","cb","addEventListener","attachEvent","each","arr","scope","initial","splice","curr","obj","Object","toString","fix-ev",5,"whenScroll","initialCheck","scrollHandler","document","documentElement","handler","./parser"],"mappings":"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","file":"when-scroll.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\n/**\n * Expose `curry` and `fix`.\n */\n\nmodule.exports = curry;\ncurry.fix = fix;\n\n/**\n * Fix event helper.\n *\n * Usage:\n *\n *   el.on('click', fix(function (ev) {\n *     // ...\n *   }));\n *\n * @param {Function} fn\n * @return {Function}\n * @api public\n */\n\nfunction curry (fn) {\n  return function (ev) {\n    fn.call(this, fix(ev));\n  }\n}\n\n/**\n * Fix event.\n *\n * @param {Event|Undefined} ev\n * @return {Event}\n * @api public\n */\n\nfunction fix (ev) {\n  if (!ev) ev = window.event;\n  if (!ev.target) ev.target = event.srcElement;\n  if (!ev.preventDefault) ev.preventDefault = set('returnValue', false);\n  if (!ev.stopPropagation) ev.stopPropagation = set('cancelBubble', false);\n  return ev;\n}\n\n/**\n * What is `set`? Not a continuable, not a future, how do you call that?\n *\n * @param {String} key\n * @param {Object} value\n * @return {Function}\n * @api private\n */\n\nfunction set (key, val) {\n  return function () {\n    this[key] = val;\n  }\n}\n",null,"'use strict';\n\nvar util = require('./util');\nvar Truth = require('./truth');\n\nfunction Parser(scrollPattern) {\n\tthis.pattern = scrollPattern;\n\n\tscrollPattern = patternToArray(scrollPattern);\n\n\tif (!patternOkay(scrollPattern)) {\n\t\tthrow new Error('when-scroll error: invalid pattern');\n\t}\n\n\tthis._truths = [];\n\n\tfor (var i = 0; i < scrollPattern.length; i += 2) {\n\t\tvar el = scrollPattern[i + 2];\n\t\tif (!el || el.nodeType !== Node.ELEMENT_NODE) {\n\t\t\tel = undefined;\n\t\t}\n\n\t\tthis._truths.push(new Truth(scrollPattern[i], scrollPattern[i + 1], el));\n\n\t\tif (el) {\n\t\t\ti++;\n\t\t}\n\t}\n\n\t// If any of the Truths are multiple, the entire thing should be\n\tthis.multiple = util.reduce(this._truths, function (acc, truth) {\n\t\treturn acc || truth.multiple;\n\t}, false);\n\n\tthis.fired = false;\n}\n\nParser.prototype.isTrue = function parserIsTrue(scrollTop) {\n\tif (this.fired && !this.multiple) {\n\t\treturn false;\n\t}\n\n\tvar isTrue = util.reduce(this._truths, function (acc, truth) {\n\t\treturn acc && truth.isTrue(scrollTop);\n\t}, true);\n\n\tif (isTrue) {\n\t\t// YOU'RE FIRED\n\t\tthis.fired = true;\n\t}\n\n\treturn isTrue;\n};\n\nmodule.exports = Parser;\n\nfunction patternToArray(scrollPattern) {\n\tif (util.isArray(scrollPattern)) {\n\t\treturn util.reduce(scrollPattern, function (acc, item) {\n\t\t\tif (typeof item === 'string') {\n\t\t\t\treturn acc.concat(patternToArray(item));\n\t\t\t}\n\n\t\t\tacc.push(item);\n\t\t\treturn acc;\n\t\t}, []);\n\t}\n\n\treturn util.reduce(scrollPattern.split(' '), function (acc, word) {\n\t\tif (word !== 'and' && word !== 'of') {\n\t\t\tacc.push(word);\n\t\t}\n\n\t\treturn acc;\n\t}, []);\n}\n\nfunction patternOkay(scrollPattern) {\n\tif (scrollPattern.length % 2 === 0) {\n\t\treturn true;\n\t}\n\n\treturn (scrollPattern[0] === 'within' && scrollPattern.length === 3);\n}\n","'use strict';\n\nfunction Truth(type, distance, el) {\n\tthis.type = type;\n\tthis.distance = parseScrollDistance(distance);\n\n\tif (el && el.nodeType === Node.ELEMENT_NODE) {\n\t\tthis.el = el;\n\t}\n\n\tthis._check = checks[this.type];\n\n\tif (typeof this._check !== 'function') {\n\t\tthrow new Error(this.type + ' check not found');\n\t}\n\n\tthis.multiple = this._check.multiple || false;\n}\n\nTruth.prototype.isTrue = function truthIsTrue(scrollTop) {\n\treturn this._check(scrollTop);\n};\n\nmodule.exports = Truth;\n\nvar checks = {};\n\nchecks.below = function belowCheck(scrollTop) {\n\treturn this.distance <= scrollTop;\n};\n\nchecks.above = function aboveCheck(scrollTop) {\n\treturn this.distance >= scrollTop;\n};\n\nchecks.within = function withinCheck() {\n\tvar viewportOffset = this.el.getBoundingClientRect().top;\n\treturn viewportOffset - window.innerHeight < this.distance;\n};\n\nchecks.every = function everyCheck(scrollTop) {\n\tif (!this._lastFiredAt) {\n\t\tthis._lastFiredAt = 0;\n\t}\n\n\tif (Math.abs(this._lastFiredAt - scrollTop) >= this.distance) {\n\t\tthis._lastFiredAt = scrollTop;\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n};\nchecks.every.multiple = true;\n\n/**\n * Converts a string into a number of pixels. Currently only supports pixels.\n *\n * @todo: Support more than pixels!\n *\n * @param {string} distance The distance down the page in pixels.\n * @returns {Number} The distance down the page in pixels.\n */\nfunction parseScrollDistance(distance) {\n\treturn parseInt(distance);\n}\n","'use strict';\n\nvar util = module.exports = {};\nvar fix = require('fix-ev');\n\nutil.on = function onEvent(event, element, cb) {\n\tif (element.addEventListener) {\n\t\telement.addEventListener(event, cb);\n\t} else if (element.attachEvent) {\n\t\telement.attachEvent('on' + event, fix(cb));\n\t}\n};\n\nutil.each = function arrayEach(arr, cb, scope) {\n\tfor (var i = 0; i < arr.length; i++) {\n\t\tcb.call(scope, arr[i], i, arr);\n\t}\n};\n\nutil.reduce = function arrayReduce(arr, cb, initial) {\n\tif (typeof initial === 'undefined') {\n\t\tinitial = arr.splice(0, 1)[0];\n\t}\n\n\t// It would be silly to carry on calling it initial\n\tvar acc = initial;\n\n\tutil.each(arr, function (curr) {\n\t\tacc = cb(acc, curr);\n\t});\n\n\treturn acc;\n};\n\nutil.isArray = function isArray(obj) {\n\treturn Object.prototype.toString.call(obj) === '[object Array]';\n};\n","'use strict';\n\nvar util = require('./util');\nvar Parser = require('./parser');\n\nfunction whenScroll(scrollPattern, cb, initialCheck) {\n\tvar handler = new Parser(scrollPattern);\n\n\tutil.on('scroll', window, scrollHandler);\n\n\tif (initialCheck) {\n\t\tscrollHandler();\n\t}\n\n\tfunction scrollHandler() {\n\t\tvar scrollTop = document.documentElement.scrollTop;\n\t\tif (handler.isTrue(scrollTop)) {\n\t\t\tcb(scrollTop);\n\t\t}\n\t}\n}\n\nwindow.whenScroll = module.exports = whenScroll;\n"],"sourceRoot":"/source/"}